{% load static %}
{% load crispy_forms_tags %}
<!DOCTYPE html>
<html lang="en">

<head>
  <title>Abogados LEX</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>

<body class="bg-light">

  <div class="container mt-3">
    <!-- Nav pills -->
    <ul class="nav nav-pills" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" data-bs-toggle="pill" href="#Inicio">Inicio</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="pill" href="#Solicitudes">Solicitudes</a>
        <!-- Aqui van los "Navbar" que son cambio de-->
      </li> <!-- pestaña y no de pagina -->
      <li class="nav-item">
        <a class="nav-link" data-bs-toggle="pill" href="#presupuestos">Presupuestos</a>
      </li> <!-- Y funcionan a traves de etiqueta que estan en-->
      <li class="nav-item"> <!-- Un div mas abajo-->
        <a class="nav-link" data-bs-toggle="pill" href="#Causa">Causa(s)</a>
      </li>
      <li class="nav-item"> <!-- Un div mas abajo-->
        <a class="nav-link" data-bs-toggle="pill" href="#Cuenta">Cuenta</a>
      </li>
      <li>
        <div class="btn btn-info text-white fw-semibold shadow-sm" style="float: left; margin-left: 15px;">
          <a href="{% url 'iniciosesion' %}" class="text-decoration-none text-dark fw-semibold">Cerrar sesión</a>
        </div>
      </li>
    </ul>
  </div>
  <!-- Tab panes -->
  <div class="tab-content"> <!--Esta es como una tabla pero cambia todo el contenido -->
    <div id="Inicio" class="container tab-pane active"><br>
      <main role="main">

        <!-- Main jumbotron for a primary marketing message or call to action -->
        <div class="jumbotron">
          <div class="container">
            <h1 class="display-3">Bienvenido devuelta {{Cli.nombre}} </h1>
            <p><a class="btn btn-primary btn-lg" href="#" role="button">Learn more »</a></p>
          </div>
        </div>

        <div class="container">
          <!-- Example row of columns -->
          <div class="row">
            <div class="col-md-4">
              <h2>Realizar una solicitud</h2>
              <p>Aquí podrás ingresar una solicitud de asistencia legal a nuestro staff de abogados, en donde ellos 
                la revisarán y si lo amerita, se generará un presupuesto formal por los servicios. 
                <!--  -->
              </p>
              <p><a class="btn btn-secondary" href="#" role="button">Ir a solicitudes »</a></p>
            </div>
            <div class="col-md-4">
              <h2>Heading</h2>
              <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor
                mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis
                euismod. Donec sed odio dui. </p>
              <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
            </div>
            <div class="col-md-4">
              <h2>Heading</h2>
              <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula
                porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut
                fermentum massa justo sit amet risus.</p>
              <p><a class="btn btn-secondary" href="#" role="button">View details »</a></p>
            </div>
          </div>

          <hr>

        </div> <!-- /container -->

      </main>
    </div>
    <div id="Solicitudes" class="container tab-pane fade"><br><!--Aca tienes el id para la relavion de arriba-->
      <h3>Solicitudes</h3><br>
      <!--Entonces entre todo este div va lo que quieres poner en presupuesto-->
      <ul class="nav nav-pills" role="tablist">
        <li class="nav-item">
          <a class="nav-link active" data-bs-toggle="pill" href="#Enviar">Enviar Solicitud</a><br>
          <!-- Aqui van los "Navbar" que son cambio de-->
        </li> <!-- pestaña y no de pagina -->
        <li class="nav-item">
          <a class="nav-link" data-bs-toggle="pill" href="#Pendiente">Solicitudes Pendientes</a><br>
        </li> <!-- Y funcionan a traves de etiqueta que estan en-->
        <li class="nav-item"> <!-- Un div mas abajo-->
          <a class="nav-link" data-bs-toggle="pill" href="#Aprobado">Solicitudes Finalizadas</a><br>
        </li>
      </ul>
      <div class="tab-content ">
        <div id="Enviar" class="container tab-pane active">
          <form action="" id="formulario" class="row" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form|crispy}}
            <div class="justify-content-center align-items-center row">
              <button type="submit" class="btn btn-primary col-2">Enviar</button>
            </div>

          </form>
        </div>
        <div id="Pendiente" class="container tab-pane fade"><br>
          <div class="row">
            <div class="col-lg-12">
              <div class="table-responsive">
                <table class="table  table-bordered text-center table-info">
                  <thead>
                    <tr>
                      <th>Título</th>
                      <th>Descripción</th>
                      <th>Tipo</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for sol in solicitudes %}
                    <tr>
                      <td>{{sol.titulo}}</td>
                      <td>{{sol.descripcion}}</td>
                      <td>{{sol.tipo}}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
        <div id="Aprobado" class="container tab-pane fade"><br>
          <div class="row">
            <div class="col-lg-12">
              <div class="table-responsive">
                <table class="table  table-bordered text-center table-info">
                  <thead>
                    <tr>
                      <th>Título</th>
                      <th>Descripción</th>
                      <th>Tipo</th>
                      <th>Estado</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Ayuda con mi niña de 6 años</td>
                      <td>El cliente ha estado cuidando a su nieta de 6 años durante el último año. La madre del niño
                        está encarcelada y su padre vive en Florida.
                        La directora de la escuela de su nieta le dijo recientemente al cliente que necesitaba una
                        tutela para mantener a su nieta matriculada en la escuela.
                        El cliente obtuvo una tutela temporal pero necesita ayuda para que la tutela sea permanente.
                        La madre del niño ha dicho que aceptará la tutela y el cliente obtendrá el consentimiento por
                        escrito. El abogado deberá notificar al padre mediante publicación
                        para obtener la tutela permanente.</td>
                      <td>Familiar</td>
                      <td>Aprobado</td>
                    </tr>
                    <tr>
                      <td>Tengo una deuda</td>
                      <td>El cliente debe más de $30,000 en varias tarjetas de crédito.
                        Acumuló esta deuda mientras lo despidieron de su trabajo, después de que se agotaran sus
                        beneficios de desempleo. Todavía está buscando otro trabajo.
                        El cliente busca declararse en bancarrota para comenzar de nuevo.</td>
                      <td>Laborales</td>
                      <td>Rechazado</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="presupuestos" class="container tab-pane fade"><br>
      <h3>Presupuestos</h3><br>

      <div class="row">
        <div class="col-lg-12">
          <div class="table-responsive">
            <table class="table  table-bordered text-center table-info">
              <thead>
                <tr>
                  <th>Abogado a cargo</th>
                  <th>Título de la causa</th>
                  <th>Honorarios por abogado</th>
                  <th>Tramites de tribunales</th>
                  <th>Total</th>
                  <th>Acción</th>
                </tr>
              </thead>
              <tbody>
                {% for pres in presupuesto %}
                <tr>
                  <td>{{pres.Abogado}}</td>
                  <td>{{pres.titulo_causa}}</td>
                  <td>{{pres.horarios}}</td>
                  <td>{{pres.tramites}}</td>
                  <td>{{pres.total}}</td>
                  <td>
                    <div class="text-white5 fw-semibold">
                      <a href="#" onclick="d()" class="text-decoration-none text-dark fst-italic btn bg-light">
                        Descargar presupuesto</a>
                    </div>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div id="Causa" class="container tab-pane fade"><br>
      <h3>Causa(s)</h3><br>
      <div class="row">
        <div class="col-lg-12">
          <div class="table-responsive">
            <table class="table  table-bordered text-center table-info">
              <thead>
                <tr>
                  <th>Abogado a cargo</th>
                  <th>Título</th>
                  <th>Acción</th>
                </tr>
              </thead>
              <tbody>
                {% for cau in causa %}
                <tr>
                  <td>{{cau.Abogado}}</td>
                  <td>{{cau.titulo}}</td>
                  <td>
                    <div class="text-white5 fw-semibold">
                      <a href="#" onclick="c()" class="text-decoration-none text-dark fst-italic btn bg-light">
                        Enviar información al correo</a>
                    </div>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div id="Cuenta" class="container tab-pane fade"><br>
      <h3>Modificar a {{Cli.rut}} {{Cli.nombre}}</h3>
      
      <form action="" id="formulario" class="row" method="POST" enctype="multipart/form-data">
        
        {% csrf_token %}
        {{ form_modi|crispy}}
        <div class="justify-content-center align-items-center row">
          <button type="submit" class="btn btn-primary col-2">Enviar</button>
        </div>

      </form>
    </div>
  </div>
  <script src="{% static 'aplicacion/js/FormularioSolicitudes.js' %}"></script>
</body>

</html>